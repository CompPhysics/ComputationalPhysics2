<!--
HTML file automatically generated from DocOnce source
(https://github.com/doconce/doconce/)
doconce format html week10.do.txt --html_style=bootstrap --pygments_html_style=default --html_admon=bootstrap_panel --html_output=week10-bs --no_mako
-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="DocOnce: https://github.com/doconce/doconce/" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="description" content="Week 12 March 21-25: Parallelization with MPI and OpenMP">
<title>Week 12 March 21-25: Parallelization with MPI and OpenMP</title>
<!-- Bootstrap style: bootstrap -->
<!-- doconce format html week10.do.txt --html_style=bootstrap --pygments_html_style=default --html_admon=bootstrap_panel --html_output=week10-bs --no_mako -->
<link href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
<!-- not necessary
<link href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
-->
<style type="text/css">
/* Add scrollbar to dropdown menus in bootstrap navigation bar */
.dropdown-menu {
   height: auto;
   max-height: 400px;
   overflow-x: hidden;
}
/* Adds an invisible element before each target to offset for the navigation
   bar */
.anchor::before {
  content:"";
  display:block;
  height:50px;      /* fixed header height for style bootstrap */
  margin:-50px 0 0; /* negative fixed header height */
}
</style>
</head>

<!-- tocinfo
{'highest level': 2,
 'sections': [('Overview of week 12, March 21-25',
               2,
               None,
               'overview-of-week-12-march-21-25'),
              ('Content', 2, None, 'content'),
              ('Optimization and profiling',
               2,
               None,
               'optimization-and-profiling'),
              ('More on optimization', 2, None, 'more-on-optimization'),
              ('Optimization and profiling',
               2,
               None,
               'optimization-and-profiling'),
              ('Optimization and debugging',
               2,
               None,
               'optimization-and-debugging'),
              ('Other hints', 2, None, 'other-hints'),
              ('Vectorization and the basic idea behind parallel computing',
               2,
               None,
               'vectorization-and-the-basic-idea-behind-parallel-computing'),
              ('A rough classification of hardware models',
               2,
               None,
               'a-rough-classification-of-hardware-models'),
              ('Shared memory and distributed memory',
               2,
               None,
               'shared-memory-and-distributed-memory'),
              ('Different parallel programming paradigms',
               2,
               None,
               'different-parallel-programming-paradigms'),
              ('Different parallel programming paradigms',
               2,
               None,
               'different-parallel-programming-paradigms'),
              ('What is vectorization?', 2, None, 'what-is-vectorization'),
              ('Number of elements that can acted upon',
               2,
               None,
               'number-of-elements-that-can-acted-upon'),
              ('Number of elements that can acted upon, examples',
               2,
               None,
               'number-of-elements-that-can-acted-upon-examples'),
              ('Operation counts for scalar operation',
               2,
               None,
               'operation-counts-for-scalar-operation'),
              ('Number of elements that can acted upon, examples',
               2,
               None,
               'number-of-elements-that-can-acted-upon-examples'),
              ('Number of operations when vectorized',
               2,
               None,
               'number-of-operations-when-vectorized'),
              ('"A simple test case with and without '
               'vectorization":"https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/Classes/cpp/program7.cpp"',
               2,
               None,
               'a-simple-test-case-with-and-without-vectorization-https-github-com-compphysics-computationalphysicsmsu-blob-master-doc-programs-lectureprograms-programs-classes-cpp-program7-cpp'),
              ('Compiling with and without vectorization',
               2,
               None,
               'compiling-with-and-without-vectorization'),
              ('Compiling with and without vectorization using clang',
               2,
               None,
               'compiling-with-and-without-vectorization-using-clang'),
              ('Automatic vectorization and vectorization inhibitors, criteria',
               2,
               None,
               'automatic-vectorization-and-vectorization-inhibitors-criteria'),
              ('Automatic vectorization and vectorization inhibitors, exit '
               'criteria',
               2,
               None,
               'automatic-vectorization-and-vectorization-inhibitors-exit-criteria'),
              ('Automatic vectorization and vectorization inhibitors, '
               'straight-line code',
               2,
               None,
               'automatic-vectorization-and-vectorization-inhibitors-straight-line-code'),
              ('Automatic vectorization and vectorization inhibitors, nested '
               'loops',
               2,
               None,
               'automatic-vectorization-and-vectorization-inhibitors-nested-loops'),
              ('Automatic vectorization and vectorization inhibitors, function '
               'calls',
               2,
               None,
               'automatic-vectorization-and-vectorization-inhibitors-function-calls'),
              ('Automatic vectorization and vectorization inhibitors, data '
               'dependencies',
               2,
               None,
               'automatic-vectorization-and-vectorization-inhibitors-data-dependencies'),
              ('Automatic vectorization and vectorization inhibitors, more '
               'data dependencies',
               2,
               None,
               'automatic-vectorization-and-vectorization-inhibitors-more-data-dependencies'),
              ('Automatic vectorization and vectorization inhibitors, memory '
               'stride',
               2,
               None,
               'automatic-vectorization-and-vectorization-inhibitors-memory-stride'),
              ('Memory management', 2, None, 'memory-management'),
              ('Memory and communication', 2, None, 'memory-and-communication'),
              ('Measuring performance', 2, None, 'measuring-performance'),
              ('Problems with measuring time',
               2,
               None,
               'problems-with-measuring-time'),
              ('Problems with cold start', 2, None, 'problems-with-cold-start'),
              ('Problems with smart compilers',
               2,
               None,
               'problems-with-smart-compilers'),
              ('Problems with interference',
               2,
               None,
               'problems-with-interference'),
              ('Problems with measuring performance',
               2,
               None,
               'problems-with-measuring-performance'),
              ('Thomas algorithm for tridiagonal linear algebra equations',
               2,
               None,
               'thomas-algorithm-for-tridiagonal-linear-algebra-equations'),
              ('Thomas algorithm, forward substitution',
               2,
               None,
               'thomas-algorithm-forward-substitution'),
              ('Thomas algorithm, backward substitution',
               2,
               None,
               'thomas-algorithm-backward-substitution'),
              ('Thomas algorithm and counting of operations (floating point '
               'and memory)',
               2,
               None,
               'thomas-algorithm-and-counting-of-operations-floating-point-and-memory'),
              ('"Example: Transpose of a '
               'matrix":"https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/Classes/cpp/program8.cpp"',
               2,
               None,
               'example-transpose-of-a-matrix-https-github-com-compphysics-computationalphysicsmsu-blob-master-doc-programs-lectureprograms-programs-classes-cpp-program8-cpp'),
              ('"Matrix-matrix '
               'multiplication":"https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/Classes/cpp/program9.cpp"',
               2,
               None,
               'matrix-matrix-multiplication-https-github-com-compphysics-computationalphysicsmsu-blob-master-doc-programs-lectureprograms-programs-classes-cpp-program9-cpp'),
              ('How do we define speedup? Simplest form',
               2,
               None,
               'how-do-we-define-speedup-simplest-form'),
              ('How do we define speedup? Correct baseline',
               2,
               None,
               'how-do-we-define-speedup-correct-baseline'),
              ('Parallel  speedup', 2, None, 'parallel-speedup'),
              ('Speedup and memory', 2, None, 'speedup-and-memory'),
              ('Upper bounds on speedup', 2, None, 'upper-bounds-on-speedup'),
              ("Amdahl's law", 2, None, 'amdahl-s-law'),
              ('How much is parallelizable',
               2,
               None,
               'how-much-is-parallelizable'),
              ("Today's situation of parallel computing",
               2,
               None,
               'today-s-situation-of-parallel-computing'),
              ('Overhead present in parallel computing',
               2,
               None,
               'overhead-present-in-parallel-computing'),
              ('Parallelizing a sequential algorithm',
               2,
               None,
               'parallelizing-a-sequential-algorithm'),
              ('Strategies', 2, None, 'strategies'),
              ('How do I run MPI on a PC/Laptop? MPI',
               2,
               None,
               'how-do-i-run-mpi-on-a-pc-laptop-mpi'),
              ('Can I do it on my own PC/laptop? OpenMP installation',
               2,
               None,
               'can-i-do-it-on-my-own-pc-laptop-openmp-installation'),
              ('Installing MPI', 2, None, 'installing-mpi'),
              ('Installing MPI and using Qt',
               2,
               None,
               'installing-mpi-and-using-qt'),
              ('What is Message Passing Interface (MPI)?',
               2,
               None,
               'what-is-message-passing-interface-mpi'),
              ('Going Parallel with MPI', 2, None, 'going-parallel-with-mpi'),
              ('MPI is a library', 2, None, 'mpi-is-a-library'),
              ('Bindings to MPI routines', 2, None, 'bindings-to-mpi-routines'),
              ('Communicator', 2, None, 'communicator'),
              ('Some of the most  important MPI functions',
               2,
               None,
               'some-of-the-most-important-mpi-functions'),
              ('"The first MPI C/C++ '
               'program":"https://github.com/CompPhysics/ComputationalPhysics2/blob/gh-pages/doc/Programs/LecturePrograms/programs/MPI/chapter07/program2.cpp"',
               2,
               None,
               'the-first-mpi-c-c-program-https-github-com-compphysics-computationalphysics2-blob-gh-pages-doc-programs-lectureprograms-programs-mpi-chapter07-program2-cpp'),
              ('The Fortran program', 2, None, 'the-fortran-program'),
              ('Note 1', 2, None, 'note-1'),
              ('"Ordered output with '
               'MPIBarrier":"https://github.com/CompPhysics/ComputationalPhysics2/blob/gh-pages/doc/Programs/LecturePrograms/programs/MPI/chapter07/program3.cpp"',
               2,
               None,
               'ordered-output-with-mpibarrier-https-github-com-compphysics-computationalphysics2-blob-gh-pages-doc-programs-lectureprograms-programs-mpi-chapter07-program3-cpp'),
              ('Note 2', 2, None, 'note-2'),
              ('"Ordered '
               'output":"https://github.com/CompPhysics/ComputationalPhysics2/blob/gh-pages/doc/Programs/LecturePrograms/programs/MPI/chapter07/program4.cpp"',
               2,
               None,
               'ordered-output-https-github-com-compphysics-computationalphysics2-blob-gh-pages-doc-programs-lectureprograms-programs-mpi-chapter07-program4-cpp'),
              ('Note 3', 2, None, 'note-3'),
              ('Note 4', 2, None, 'note-4'),
              ('"Numerical integration in '
               'parallel":"https://github.com/CompPhysics/ComputationalPhysics2/blob/gh-pages/doc/Programs/LecturePrograms/programs/MPI/chapter07/program6.cpp"',
               2,
               None,
               'numerical-integration-in-parallel-https-github-com-compphysics-computationalphysics2-blob-gh-pages-doc-programs-lectureprograms-programs-mpi-chapter07-program6-cpp'),
              ('Dissection of trapezoidal rule with $MPI\\_reduce$',
               2,
               None,
               'dissection-of-trapezoidal-rule-with-mpi-reduce'),
              ('Dissection of trapezoidal rule',
               2,
               None,
               'dissection-of-trapezoidal-rule'),
              ('Integrating with _MPI_', 2, None, 'integrating-with-mpi'),
              ('How do I use $MPI\\_reduce$?',
               2,
               None,
               'how-do-i-use-mpi-reduce'),
              ('More on $MPI\\_Reduce$', 2, None, 'more-on-mpi-reduce'),
              ('Dissection of trapezoidal rule',
               2,
               None,
               'dissection-of-trapezoidal-rule'),
              ('Dissection of trapezoidal rule',
               2,
               None,
               'dissection-of-trapezoidal-rule'),
              ('"The quantum dot program for two '
               'electrons":"https://github.com/CompPhysics/ComputationalPhysics2/blob/master/doc/Programs/ParallelizationMPI/MPIvmcqdot.cpp"',
               2,
               None,
               'the-quantum-dot-program-for-two-electrons-https-github-com-compphysics-computationalphysics2-blob-master-doc-programs-parallelizationmpi-mpivmcqdot-cpp'),
              ('What is OpenMP', 2, None, 'what-is-openmp'),
              ('Getting started, things to remember',
               2,
               None,
               'getting-started-things-to-remember'),
              ('OpenMP syntax', 2, None, 'openmp-syntax'),
              ('Different OpenMP styles of parallelism',
               2,
               None,
               'different-openmp-styles-of-parallelism'),
              ('General code structure', 2, None, 'general-code-structure'),
              ('Parallel region', 2, None, 'parallel-region'),
              ('Hello world, not again, please!',
               2,
               None,
               'hello-world-not-again-please'),
              ('Hello world, yet another variant',
               2,
               None,
               'hello-world-yet-another-variant'),
              ('Important OpenMP library routines',
               2,
               None,
               'important-openmp-library-routines'),
              ('Private variables', 2, None, 'private-variables'),
              ('Master region', 2, None, 'master-region'),
              ('Parallel for loop', 2, None, 'parallel-for-loop'),
              ('Parallel computations and loops',
               2,
               None,
               'parallel-computations-and-loops'),
              ('Scheduling of  loop computations',
               2,
               None,
               'scheduling-of-loop-computations'),
              ('Example code for loop scheduling',
               2,
               None,
               'example-code-for-loop-scheduling'),
              ('Example code for loop scheduling, guided instead of dynamic',
               2,
               None,
               'example-code-for-loop-scheduling-guided-instead-of-dynamic'),
              ('More on Parallel for loop',
               2,
               None,
               'more-on-parallel-for-loop'),
              ('What can happen with this loop?',
               2,
               None,
               'what-can-happen-with-this-loop'),
              ('Inner product', 2, None, 'inner-product'),
              ('Different threads do different tasks',
               2,
               None,
               'different-threads-do-different-tasks'),
              ('Single execution', 2, None, 'single-execution'),
              ('Coordination and synchronization',
               2,
               None,
               'coordination-and-synchronization'),
              ('Data scope', 2, None, 'data-scope'),
              ('Some remarks', 2, None, 'some-remarks'),
              ('Parallelizing nested for-loops',
               2,
               None,
               'parallelizing-nested-for-loops'),
              ('Nested parallelism', 2, None, 'nested-parallelism'),
              ('Parallel tasks', 2, None, 'parallel-tasks'),
              ('Common mistakes', 2, None, 'common-mistakes'),
              ('Not all computations are simple',
               2,
               None,
               'not-all-computations-are-simple'),
              ('Not all computations are simple, competing threads',
               2,
               None,
               'not-all-computations-are-simple-competing-threads'),
              ('How to find the max value using OpenMP',
               2,
               None,
               'how-to-find-the-max-value-using-openmp'),
              ('Then deal with the race conditions',
               2,
               None,
               'then-deal-with-the-race-conditions'),
              ('What can slow down OpenMP performance?',
               2,
               None,
               'what-can-slow-down-openmp-performance'),
              ('What can slow down OpenMP performance?',
               2,
               None,
               'what-can-slow-down-openmp-performance'),
              ('Find the max location for each thread',
               2,
               None,
               'find-the-max-location-for-each-thread'),
              ('Combine the values from each thread',
               2,
               None,
               'combine-the-values-from-each-thread'),
              ('"Matrix-matrix '
               'multiplication":"https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/ParallelizationOpenMP/OpenMPvectornorm.cpp"',
               2,
               None,
               'matrix-matrix-multiplication-https-github-com-compphysics-computationalphysicsmsu-blob-master-doc-programs-parallelizationopenmp-openmpvectornorm-cpp'),
              ('"Matrix-matrix '
               'multiplication":"https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/ParallelizationOpenMP/OpenMPmatrixmatrixmult.cpp"',
               2,
               None,
               'matrix-matrix-multiplication-https-github-com-compphysics-computationalphysicsmsu-blob-master-doc-programs-parallelizationopenmp-openmpmatrixmatrixmult-cpp')]}
end of tocinfo -->

<body>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "none"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js", "color.js"]
  }
});
</script>
<script type="text/javascript" async
 src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<!-- Bootstrap navigation bar -->
<div class="navbar navbar-default navbar-fixed-top">
  <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="week10-bs.html">Week 12 March 21-25: Parallelization with MPI and OpenMP</a>
  </div>
  <div class="navbar-collapse collapse navbar-responsive-collapse">
    <ul class="nav navbar-nav navbar-right">
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Contents <b class="caret"></b></a>
        <ul class="dropdown-menu">
     <!-- navigation toc: --> <li><a href="._week10-bs001.html#overview-of-week-12-march-21-25" style="font-size: 80%;">Overview of week 12, March 21-25</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs002.html#content" style="font-size: 80%;">Content</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs005.html#optimization-and-profiling" style="font-size: 80%;">Optimization and profiling</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs004.html#more-on-optimization" style="font-size: 80%;">More on optimization</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs005.html#optimization-and-profiling" style="font-size: 80%;">Optimization and profiling</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs006.html#optimization-and-debugging" style="font-size: 80%;">Optimization and debugging</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs007.html#other-hints" style="font-size: 80%;">Other hints</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs008.html#vectorization-and-the-basic-idea-behind-parallel-computing" style="font-size: 80%;">Vectorization and the basic idea behind parallel computing</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs009.html#a-rough-classification-of-hardware-models" style="font-size: 80%;">A rough classification of hardware models</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs010.html#shared-memory-and-distributed-memory" style="font-size: 80%;">Shared memory and distributed memory</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs012.html#different-parallel-programming-paradigms" style="font-size: 80%;">Different parallel programming paradigms</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs012.html#different-parallel-programming-paradigms" style="font-size: 80%;">Different parallel programming paradigms</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs013.html#what-is-vectorization" style="font-size: 80%;">What is vectorization?</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs014.html#number-of-elements-that-can-acted-upon" style="font-size: 80%;">Number of elements that can acted upon</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs017.html#number-of-elements-that-can-acted-upon-examples" style="font-size: 80%;">Number of elements that can acted upon, examples</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs016.html#operation-counts-for-scalar-operation" style="font-size: 80%;">Operation counts for scalar operation</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs017.html#number-of-elements-that-can-acted-upon-examples" style="font-size: 80%;">Number of elements that can acted upon, examples</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs018.html#number-of-operations-when-vectorized" style="font-size: 80%;">Number of operations when vectorized</a></li>
     <!-- navigation toc: --> <li><a href="#a-simple-test-case-with-and-without-vectorization-https-github-com-compphysics-computationalphysicsmsu-blob-master-doc-programs-lectureprograms-programs-classes-cpp-program7-cpp" style="font-size: 80%;">"A simple test case with and without vectorization":"https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/Classes/cpp/program7.cpp"</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs020.html#compiling-with-and-without-vectorization" style="font-size: 80%;">Compiling with and without vectorization</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs021.html#compiling-with-and-without-vectorization-using-clang" style="font-size: 80%;">Compiling with and without vectorization using clang</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs022.html#automatic-vectorization-and-vectorization-inhibitors-criteria" style="font-size: 80%;">Automatic vectorization and vectorization inhibitors, criteria</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs023.html#automatic-vectorization-and-vectorization-inhibitors-exit-criteria" style="font-size: 80%;">Automatic vectorization and vectorization inhibitors, exit criteria</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs024.html#automatic-vectorization-and-vectorization-inhibitors-straight-line-code" style="font-size: 80%;">Automatic vectorization and vectorization inhibitors, straight-line code</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs025.html#automatic-vectorization-and-vectorization-inhibitors-nested-loops" style="font-size: 80%;">Automatic vectorization and vectorization inhibitors, nested loops</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs026.html#automatic-vectorization-and-vectorization-inhibitors-function-calls" style="font-size: 80%;">Automatic vectorization and vectorization inhibitors, function calls</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs027.html#automatic-vectorization-and-vectorization-inhibitors-data-dependencies" style="font-size: 80%;">Automatic vectorization and vectorization inhibitors, data dependencies</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs028.html#automatic-vectorization-and-vectorization-inhibitors-more-data-dependencies" style="font-size: 80%;">Automatic vectorization and vectorization inhibitors, more data dependencies</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs029.html#automatic-vectorization-and-vectorization-inhibitors-memory-stride" style="font-size: 80%;">Automatic vectorization and vectorization inhibitors, memory stride</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs030.html#memory-management" style="font-size: 80%;">Memory management</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs031.html#memory-and-communication" style="font-size: 80%;">Memory and communication</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs032.html#measuring-performance" style="font-size: 80%;">Measuring performance</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs033.html#problems-with-measuring-time" style="font-size: 80%;">Problems with measuring time</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs034.html#problems-with-cold-start" style="font-size: 80%;">Problems with cold start</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs035.html#problems-with-smart-compilers" style="font-size: 80%;">Problems with smart compilers</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs036.html#problems-with-interference" style="font-size: 80%;">Problems with interference</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs037.html#problems-with-measuring-performance" style="font-size: 80%;">Problems with measuring performance</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs038.html#thomas-algorithm-for-tridiagonal-linear-algebra-equations" style="font-size: 80%;">Thomas algorithm for tridiagonal linear algebra equations</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs039.html#thomas-algorithm-forward-substitution" style="font-size: 80%;">Thomas algorithm, forward substitution</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs040.html#thomas-algorithm-backward-substitution" style="font-size: 80%;">Thomas algorithm, backward substitution</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs041.html#thomas-algorithm-and-counting-of-operations-floating-point-and-memory" style="font-size: 80%;">Thomas algorithm and counting of operations (floating point and memory)</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs042.html#example-transpose-of-a-matrix-https-github-com-compphysics-computationalphysicsmsu-blob-master-doc-programs-lectureprograms-programs-classes-cpp-program8-cpp" style="font-size: 80%;">"Example: Transpose of a matrix":"https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/Classes/cpp/program8.cpp"</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs043.html#matrix-matrix-multiplication-https-github-com-compphysics-computationalphysicsmsu-blob-master-doc-programs-lectureprograms-programs-classes-cpp-program9-cpp" style="font-size: 80%;">"Matrix-matrix multiplication":"https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/Classes/cpp/program9.cpp"</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs044.html#how-do-we-define-speedup-simplest-form" style="font-size: 80%;">How do we define speedup? Simplest form</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs045.html#how-do-we-define-speedup-correct-baseline" style="font-size: 80%;">How do we define speedup? Correct baseline</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs046.html#parallel-speedup" style="font-size: 80%;">Parallel  speedup</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs047.html#speedup-and-memory" style="font-size: 80%;">Speedup and memory</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs048.html#upper-bounds-on-speedup" style="font-size: 80%;">Upper bounds on speedup</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs049.html#amdahl-s-law" style="font-size: 80%;">Amdahl's law</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs050.html#how-much-is-parallelizable" style="font-size: 80%;">How much is parallelizable</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs051.html#today-s-situation-of-parallel-computing" style="font-size: 80%;">Today's situation of parallel computing</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs052.html#overhead-present-in-parallel-computing" style="font-size: 80%;">Overhead present in parallel computing</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs053.html#parallelizing-a-sequential-algorithm" style="font-size: 80%;">Parallelizing a sequential algorithm</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs054.html#strategies" style="font-size: 80%;">Strategies</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs055.html#how-do-i-run-mpi-on-a-pc-laptop-mpi" style="font-size: 80%;">How do I run MPI on a PC/Laptop? MPI</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs056.html#can-i-do-it-on-my-own-pc-laptop-openmp-installation" style="font-size: 80%;">Can I do it on my own PC/laptop? OpenMP installation</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs057.html#installing-mpi" style="font-size: 80%;">Installing MPI</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs058.html#installing-mpi-and-using-qt" style="font-size: 80%;">Installing MPI and using Qt</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs059.html#what-is-message-passing-interface-mpi" style="font-size: 80%;">What is Message Passing Interface (MPI)?</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs060.html#going-parallel-with-mpi" style="font-size: 80%;">Going Parallel with MPI</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs061.html#mpi-is-a-library" style="font-size: 80%;">MPI is a library</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs062.html#bindings-to-mpi-routines" style="font-size: 80%;">Bindings to MPI routines</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs063.html#communicator" style="font-size: 80%;">Communicator</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs064.html#some-of-the-most-important-mpi-functions" style="font-size: 80%;">Some of the most  important MPI functions</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs065.html#the-first-mpi-c-c-program-https-github-com-compphysics-computationalphysics2-blob-gh-pages-doc-programs-lectureprograms-programs-mpi-chapter07-program2-cpp" style="font-size: 80%;">"The first MPI C/C++ program":"https://github.com/CompPhysics/ComputationalPhysics2/blob/gh-pages/doc/Programs/LecturePrograms/programs/MPI/chapter07/program2.cpp"</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs066.html#the-fortran-program" style="font-size: 80%;">The Fortran program</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs067.html#note-1" style="font-size: 80%;">Note 1</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs068.html#ordered-output-with-mpibarrier-https-github-com-compphysics-computationalphysics2-blob-gh-pages-doc-programs-lectureprograms-programs-mpi-chapter07-program3-cpp" style="font-size: 80%;">"Ordered output with MPIBarrier":"https://github.com/CompPhysics/ComputationalPhysics2/blob/gh-pages/doc/Programs/LecturePrograms/programs/MPI/chapter07/program3.cpp"</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs069.html#note-2" style="font-size: 80%;">Note 2</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs070.html#ordered-output-https-github-com-compphysics-computationalphysics2-blob-gh-pages-doc-programs-lectureprograms-programs-mpi-chapter07-program4-cpp" style="font-size: 80%;">"Ordered output":"https://github.com/CompPhysics/ComputationalPhysics2/blob/gh-pages/doc/Programs/LecturePrograms/programs/MPI/chapter07/program4.cpp"</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs071.html#note-3" style="font-size: 80%;">Note 3</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs072.html#note-4" style="font-size: 80%;">Note 4</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs073.html#numerical-integration-in-parallel-https-github-com-compphysics-computationalphysics2-blob-gh-pages-doc-programs-lectureprograms-programs-mpi-chapter07-program6-cpp" style="font-size: 80%;">"Numerical integration in parallel":"https://github.com/CompPhysics/ComputationalPhysics2/blob/gh-pages/doc/Programs/LecturePrograms/programs/MPI/chapter07/program6.cpp"</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs074.html#dissection-of-trapezoidal-rule-with-mpi-reduce" style="font-size: 80%;">Dissection of trapezoidal rule with \( MPI\_reduce \)</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs080.html#dissection-of-trapezoidal-rule" style="font-size: 80%;">Dissection of trapezoidal rule</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs076.html#integrating-with-mpi" style="font-size: 80%;">Integrating with <b>MPI</b></a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs077.html#how-do-i-use-mpi-reduce" style="font-size: 80%;">How do I use \( MPI\_reduce \)?</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs078.html#more-on-mpi-reduce" style="font-size: 80%;">More on \( MPI\_Reduce \)</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs080.html#dissection-of-trapezoidal-rule" style="font-size: 80%;">Dissection of trapezoidal rule</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs080.html#dissection-of-trapezoidal-rule" style="font-size: 80%;">Dissection of trapezoidal rule</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs081.html#the-quantum-dot-program-for-two-electrons-https-github-com-compphysics-computationalphysics2-blob-master-doc-programs-parallelizationmpi-mpivmcqdot-cpp" style="font-size: 80%;">"The quantum dot program for two electrons":"https://github.com/CompPhysics/ComputationalPhysics2/blob/master/doc/Programs/ParallelizationMPI/MPIvmcqdot.cpp"</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs082.html#what-is-openmp" style="font-size: 80%;">What is OpenMP</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs083.html#getting-started-things-to-remember" style="font-size: 80%;">Getting started, things to remember</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs084.html#openmp-syntax" style="font-size: 80%;">OpenMP syntax</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs085.html#different-openmp-styles-of-parallelism" style="font-size: 80%;">Different OpenMP styles of parallelism</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs086.html#general-code-structure" style="font-size: 80%;">General code structure</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs087.html#parallel-region" style="font-size: 80%;">Parallel region</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs088.html#hello-world-not-again-please" style="font-size: 80%;">Hello world, not again, please!</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs089.html#hello-world-yet-another-variant" style="font-size: 80%;">Hello world, yet another variant</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs090.html#important-openmp-library-routines" style="font-size: 80%;">Important OpenMP library routines</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs091.html#private-variables" style="font-size: 80%;">Private variables</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs092.html#master-region" style="font-size: 80%;">Master region</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs093.html#parallel-for-loop" style="font-size: 80%;">Parallel for loop</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs094.html#parallel-computations-and-loops" style="font-size: 80%;">Parallel computations and loops</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs095.html#scheduling-of-loop-computations" style="font-size: 80%;">Scheduling of  loop computations</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs096.html#example-code-for-loop-scheduling" style="font-size: 80%;">Example code for loop scheduling</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs097.html#example-code-for-loop-scheduling-guided-instead-of-dynamic" style="font-size: 80%;">Example code for loop scheduling, guided instead of dynamic</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs098.html#more-on-parallel-for-loop" style="font-size: 80%;">More on Parallel for loop</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs099.html#what-can-happen-with-this-loop" style="font-size: 80%;">What can happen with this loop?</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs100.html#inner-product" style="font-size: 80%;">Inner product</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs101.html#different-threads-do-different-tasks" style="font-size: 80%;">Different threads do different tasks</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs102.html#single-execution" style="font-size: 80%;">Single execution</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs103.html#coordination-and-synchronization" style="font-size: 80%;">Coordination and synchronization</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs104.html#data-scope" style="font-size: 80%;">Data scope</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs105.html#some-remarks" style="font-size: 80%;">Some remarks</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs106.html#parallelizing-nested-for-loops" style="font-size: 80%;">Parallelizing nested for-loops</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs107.html#nested-parallelism" style="font-size: 80%;">Nested parallelism</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs108.html#parallel-tasks" style="font-size: 80%;">Parallel tasks</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs109.html#common-mistakes" style="font-size: 80%;">Common mistakes</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs110.html#not-all-computations-are-simple" style="font-size: 80%;">Not all computations are simple</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs111.html#not-all-computations-are-simple-competing-threads" style="font-size: 80%;">Not all computations are simple, competing threads</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs112.html#how-to-find-the-max-value-using-openmp" style="font-size: 80%;">How to find the max value using OpenMP</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs113.html#then-deal-with-the-race-conditions" style="font-size: 80%;">Then deal with the race conditions</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs115.html#what-can-slow-down-openmp-performance" style="font-size: 80%;">What can slow down OpenMP performance?</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs115.html#what-can-slow-down-openmp-performance" style="font-size: 80%;">What can slow down OpenMP performance?</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs116.html#find-the-max-location-for-each-thread" style="font-size: 80%;">Find the max location for each thread</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs117.html#combine-the-values-from-each-thread" style="font-size: 80%;">Combine the values from each thread</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs118.html#matrix-matrix-multiplication-https-github-com-compphysics-computationalphysicsmsu-blob-master-doc-programs-parallelizationopenmp-openmpvectornorm-cpp" style="font-size: 80%;">"Matrix-matrix multiplication":"https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/ParallelizationOpenMP/OpenMPvectornorm.cpp"</a></li>
     <!-- navigation toc: --> <li><a href="._week10-bs119.html#matrix-matrix-multiplication-https-github-com-compphysics-computationalphysicsmsu-blob-master-doc-programs-parallelizationopenmp-openmpmatrixmatrixmult-cpp" style="font-size: 80%;">"Matrix-matrix multiplication":"https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/ParallelizationOpenMP/OpenMPmatrixmatrixmult.cpp"</a></li>

        </ul>
      </li>
    </ul>
  </div>
</div>
</div> <!-- end of navigation bar -->
<div class="container">
<p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p> <!-- add vertical space -->
<a name="part0019"></a>
<!-- !split -->
<h2 id="a-simple-test-case-with-and-without-vectorization-https-github-com-compphysics-computationalphysicsmsu-blob-master-doc-programs-lectureprograms-programs-classes-cpp-program7-cpp" class="anchor"><a href="https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/Classes/cpp/program7.cpp" target="_self">A simple test case with and without vectorization</a> </h2>
<p>We implement these operations in a simple c++ program that computes at the end the norm of a vector.</p>


<!-- code=text (!bc cppcode) typeset with pygments style "default" -->
<div class="cell border-box-sizing code_cell rendered">
  <div class="input">
    <div class="inner_cell">
      <div class="input_area">
        <div class="highlight" style="background: #f8f8f8">
  <pre style="line-height: 125%;">#include &lt;cstdlib&gt;
#include &lt;iostream&gt;
#include &lt;cmath&gt;
#include &lt;iomanip&gt;
#include &quot;time.h&quot;

using namespace std; // note use of namespace
int main (int argc, char* argv[])
{
  // read in dimension of square matrix
  int n = atoi(argv[1]);
  double s = 1.0/sqrt( (double) n);
  double *a, *b, *c;
  // Start timing
  clock_t start, finish;
  start = clock();
// Allocate space for the vectors to be used
    a = new double [n]; b = new double [n]; c = new double [n];
  // Define parallel region
  // Set up values for vectors  a and b
  for (int i = 0; i &lt; n; i++){
    double angle = 2.0*M_PI*i/ (( double ) n);
    a[i] = s*(sin(angle) + cos(angle));
    b[i] =  s*sin(2.0*angle);
    c[i] = 0.0;
  }
  // Then perform the vector addition
  for (int i = 0; i &lt; n; i++){
    c[i] += a[i]+b[i];
  }
  // Compute now the norm-2
  double Norm2 = 0.0;
  for (int i = 0; i &lt; n; i++){
    Norm2  += c[i]*c[i];
  }
  finish = clock();
  double timeused = (double) (finish - start)/(CLOCKS_PER_SEC );
  cout &lt;&lt; setiosflags(ios::showpoint | ios::uppercase);
  cout &lt;&lt; setprecision(10) &lt;&lt; setw(20) &lt;&lt; &quot;Time used  for norm computation=&quot; &lt;&lt; timeused  &lt;&lt; endl;
  cout &lt;&lt; &quot;  Norm-2  = &quot; &lt;&lt; Norm2 &lt;&lt; endl;
  // Free up space
  delete[] a;
  delete[] b;
  delete[] c;
  return 0;
}
</pre>
</div>
      </div>
    </div>
  </div>
  <div class="output_wrapper">
    <div class="output">
      <div class="output_area">
        <div class="output_subarea output_stream output_stdout output_text">          
        </div>
      </div>
    </div>
  </div>
</div>


<p>
<!-- navigation buttons at the bottom of the page -->
<ul class="pagination">
<li><a href="._week10-bs018.html">&laquo;</a></li>
  <li><a href="._week10-bs000.html">1</a></li>
  <li><a href="">...</a></li>
  <li><a href="._week10-bs011.html">12</a></li>
  <li><a href="._week10-bs012.html">13</a></li>
  <li><a href="._week10-bs013.html">14</a></li>
  <li><a href="._week10-bs014.html">15</a></li>
  <li><a href="._week10-bs015.html">16</a></li>
  <li><a href="._week10-bs016.html">17</a></li>
  <li><a href="._week10-bs017.html">18</a></li>
  <li><a href="._week10-bs018.html">19</a></li>
  <li class="active"><a href="._week10-bs019.html">20</a></li>
  <li><a href="._week10-bs020.html">21</a></li>
  <li><a href="._week10-bs021.html">22</a></li>
  <li><a href="._week10-bs022.html">23</a></li>
  <li><a href="._week10-bs023.html">24</a></li>
  <li><a href="._week10-bs024.html">25</a></li>
  <li><a href="._week10-bs025.html">26</a></li>
  <li><a href="._week10-bs026.html">27</a></li>
  <li><a href="._week10-bs027.html">28</a></li>
  <li><a href="._week10-bs028.html">29</a></li>
  <li><a href="">...</a></li>
  <li><a href="._week10-bs119.html">120</a></li>
  <li><a href="._week10-bs020.html">&raquo;</a></li>
</ul>
<!-- ------------------- end of main content --------------- -->
</div>  <!-- end container -->
<!-- include javascript, jQuery *first* -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
<!-- Bootstrap footer
<footer>
<a href="https://..."><img width="250" align=right src="https://..."></a>
</footer>
-->
<center style="font-size:80%">
<!-- copyright only on the titlepage -->
</center>
</body>
</html>

